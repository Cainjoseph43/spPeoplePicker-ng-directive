(function(n){"use strict";n.module("spUtils",[])})(angular=angular||window.angular);var angular=angular||window.angular;(function(n){"use strict";function t(n,t){var r=t.defer(),i,u;SP.SOD.registerSod||(i=document.createElement("script"),i.src="/_layouts/15/init.js",u=document.getElementsByTagName("head"),u.append(i));SP.SOD.registerSod("sp.js","/_layouts/15/sp.js");SP.SOD.registerSod("sp.runtime.js","/_layouts/15/sp.runtime.js");SP.SOD.registerSod("clienttemplates.js","/_layouts/15/clienttemplates.js");SP.SOD.registerSod("clientforms.js","/_layouts/15/clientforms.js");SP.SOD.registerSod("autofill.js","/_layouts/15/autofill.js");SP.SOD.registerSod("sp.core.js","/_layouts/15/sp.core.js");SP.SOD.registerSod("sp.RequestExecutor.js","/_layouts/15/sp.RequestExecutor.js");SP.SOD.registerSod("clientpeoplepicker.js","/_layouts/15/clientpeoplepicker.js");SP.SOD.registerSodDep("sp.RequestExecutor.js","sp.core.js");SP.SOD.registerSodDep("sp.core.js","sp.js");SP.SOD.registerSodDep("sp.core.js","sp.runtime.js");SP.SOD.registerSodDep("clientpeoplepicker.js","clienttemplates.js");SP.SOD.registerSodDep("clientpeoplepicker.js","clientforms.js");SP.SOD.registerSodDep("clientpeoplepicker.js","autofill.js");SP.SOD.registerSodDep("clientpeoplepicker.js","sp.core.js");SP.SOD.registerSodDep("clientpeoplepicker.js","sp.RequestExecutor.js");SP.SOD.executeFunc("clientpeoplepicker.js","SPClientPeoplePicker",function(){console.log("loaded");r.resolve()});this.scriptsLoaded=r.promise}n.module("spUtils").service("spPpJsdepLoader",["$document","$q",t])})(angular),function(n){"use strict";function t(t){function r(n){var t,i,r;n==null&&(t=document.getElementById(this.ResolvedListElementId),t!=null&&(n=t.lastChild));n!=null&&(i=n.id,n.parentNode.removeChild(n),r=this.ProcessedUserList[i],r==null||r.ResolvedUser||this.UnresolvedUserCount--,this.TotalUserCount--,delete this.ProcessedUserList[i])}function u(n,t){for(var i=0,r=t.length;i<r;i++)if(n.Key===t[i].Key)return!0;return!1}function f(n,t){return n.reduce(function(n,i){return typeof t=="function"?e(n,i,t)<0&&n.push(i):n.indexOf(i)<0&&n.push(i),n},[])}function e(n,t,i){if(n==null)throw new TypeError('"array" is null or not defined');var f=Object(n),u=f.length,r;if(u===0)return-1;for(r=0;r<u;r++)if(i(t,n[r]))return r;return-1}function o(t,i){if(t===i)return!0;if(n.isArray(t)&&n.isArray(i)){if(t.length!==i.length)return!1;t.sort(function(n,t){return n.Key-t.Key});i.sort(function(n,t){return n.Key-t.Key});for(var r=0,u=t.length;r<u;r++)if(t[r].Key!==i[r].Key)return!1}return!0}function s(i,e,s,h){i.ngModel=h.$modelValue||[];var l=e[0].id,a=l+"_TopSpan",c,v={PrincipalAccountType:"User,DL,SecGroup,SPGroup",SearchPrincipalSource:15,ResolvePrincipalSource:15,AllowMultipleValues:s.allowMulti?s.allowMulti:!0,MaximumEntitySuggestions:25,Width:s.cssWidth?s.cssWidth:"220px",OnUserResolvedClientScript:function(n,t){h.$setViewValue(t)}};t.scriptsLoaded.then(function(){window.SPClientPeoplePicker_InitStandaloneControlWrapper(l,[],v);c=window.SPClientPeoplePicker.SPClientPeoplePickerDict[a]},function(){throw new Error("could not load Scripts");});h.$isEmpty=function(t){return n.isArray(t)&&t.length>0&&t.map(function(n){return n.Key}).length>0?!1:!0};h.$render=function(){var n,o;if(c){var i=h.$viewValue||[],t=[],f=[],e=[];if(c.TotalUserCount>0)for(t=Object.keys(c.ProcessedUserList).map(function(n){var t=c.ProcessedUserList[n];return{Key:t.UserInfo.Key,UserContainerElementId:t.UserContainerElementId}}),n=0;n<t.length;n++)u(t[n],i)?e.push(t[n].Key):(o=document.getElementById(t[n].UserContainerElementId),r.apply(c,o));f=i.filter(function(n){return e.indexOf(n.Key)===-1});c.AddUserKeys(f.map(function(n){return n.Key}).join(";"));c.UpdateUnresolvedUser();c.Validate()}};h.$parsers.push(function(n){return h.$isEmpty(n)?n:n.map(function(n){return{Key:n.Key,DisplayText:n.DisplayText}})});i.$watch("ngModel",function(n){if(!o(h.$modelValue,h.$viewValue)){var t=f(n,function(n,t){return n.Key===t.Key});h.$setViewValue(t)}h.$render()},!0)}function h(){return"<div id='peoplePickerDiv_"+i+++"'><\/div>"}var i=1;return{restrict:"E",require:"ngModel",replace:!0,link:s,scope:{ngModel:"="},template:h}}n.module("spUtils").directive("spPeoplePicker",["spPpJsdepLoader",t])}(angular=angular||window.angular);
//# sourceMappingURL=sp-ngUtils.min.js.map
